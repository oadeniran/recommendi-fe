<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>recommendi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

    <template id="skeleton-card-template">
        <div class="rec-card skeleton-card">
            <div class="skeleton skeleton-img"></div>
            <div class="rec-card-content">
                <div class="skeleton skeleton-title"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text short"></div>
            </div>
        </div>
    </template>

    <div class="app-wrapper">
        <aside class="sidebar">
            <div class="sidebar-header">
                <button id="sidebar-back-btn" title="Go Back">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z"></path></svg>
                </button>
                <button id="new-session-btn" title="New Session">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"></path></svg>
                </button>
            </div>
            <nav class="session-history">
                <ul id="session-history-list">
                    </ul>
            </nav>
            <div class="sidebar-tips">
                <p><strong><i class="fas fa-lightbulb"></i> Tips:</strong></p>
                <ul>
                    <li>Use your browser's back button or back button of sidebar to explore a previous path.</li>
                    <li>Click any session title to jump back to that search.</li>
                </ul>
            </div>
            <div class="sidebar-footer">
                <button id="clear-history-btn" class="sidebar-btn" disabled>Clear History</button>
            </div>
        </aside>

         <div class="sidebar-overlay"></div>

        <div class="container">
            <div class="mobile-header">
                <button id="menu-toggle-btn" title="Toggle Menu">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 4H21V6H3V4ZM3 11H21V13H3V11ZM3 18H21V20H3V18Z"></path></svg>
                </button>
            </div>

            <header>
                <h1>Recommendi âœ¨</h1>
                <p>Your AI-powered recommendation engine. (Data powered by Qloo)</p>
            </header>

            <main>
                <form id="recommendation-form">
                    <div class="form-group">
                        <label for="user_message">What's on your mind? Tell me what you're looking for.</label>
                        <textarea name="user_message" id="user_message" rows="4" placeholder="e.g., 'I want a movie that's like a western but in space...'" required></textarea>
                        
                        <small class="input-hint">This isn't conversational, so no need to refer to previous prompts. Provide as much context as you like in a single message for the best results.</small>
                    </div>
                    <div class="form-group">
                        <label>Select a category:</label>
                        <div class="category-buttons-container">
                            </div>
                        <div id="search-context-display"></div>
                        <input type="hidden" name="category" id="selected-category" value="Movie" required>
                    </div>
                    <button type="submit" class="submit-btn">Get Recommendation</button>
                </form>

                <div class="results-container" id="results-container">
                    <div class="recommendations-grid" id="recommendations-grid">
                        </div>
                    <div class="pagination-container" id="pagination-container">
                        </div>
                </div>
            </main>
        </div>
    </div>

    <div class="modal-overlay" id="modal-overlay"><div class="modal-content"><button class="modal-close" id="modal-close">&times;</button><div id="modal-body"></div></div></div>
    
    <script src="{{ url_for('static', filename='js/loader.js') }}" defer></script>
</body>
</html>